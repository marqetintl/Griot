(this["webpackJsonp@grio/client"]=this["webpackJsonp@grio/client"]||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){},11:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return l}));var n=c(27),a=c(16),r=c.n(a),s=c(4),i="".concat(s.a).concat("/api/v1/");r.a.defaults.xsrfCookieName="csrftoken",r.a.defaults.xsrfHeaderName="X-CSRFTOKEN",r.a.defaults.headers.post["Content-Type"]="application/json";var o=r.a.create({baseURL:i,timeout:3e3,withCredentials:!0,headers:{"Content-type":"application/json"}});function l(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"slug",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.map((function(e){return e[c]}));return r.includes(t[c])?e.map((function(e){return e[c]===t[c]?t:e})):a?[].concat(Object(n.a)(e),[t]):[t].concat(Object(n.a)(e))}},17:function(e,t,c){"use strict";c.d(t,"c",(function(){return O})),c.d(t,"a",(function(){return g})),c.d(t,"b",(function(){return N}));c(35),c(1);var n=c(24),a=c.n(n),r=c(3),s=c.n(r),i=c(4),o=(c(101),c(0)),l=function(e){var t=e.children;return a.a.createPortal(t,document.body)};l.Modal=function(e){var t=e.id,c=e.header,n=e.children,a=e.footer,r=e.fullscreen;return Object(o.jsxs)("div",{id:t,className:"modal-container",children:[Object(o.jsx)("div",{className:"modal-background"}),Object(o.jsx)("div",{className:"modal-inner",children:Object(o.jsx)("div",{className:"modal-content",children:Object(o.jsxs)("div",{className:Object(i.e)(["modal-content-inner",r&&"modal-content-inner-fullscreen"]),children:[c&&Object(o.jsx)("div",{className:"modal-header",children:c}),Object(o.jsx)("div",{className:"modal-body",children:n}),a&&Object(o.jsx)("div",{className:"modal-footer",children:a})]})})})]})},l.propTypes={children:s.a.node.isRequired};var u=c(2),j=c(6),d=(c(102),["Icon","src"]),b=["Icon"];function O(e){var t=e.Icon,c=e.src,n=Object(j.a)(e,d);return c?(c=Object(i.f)(c),Object(o.jsx)("img",Object(u.a)(Object(u.a)({},n),{},{src:c,alt:e.alt_text||""}))):Object(o.jsx)(h,Object(u.a)(Object(u.a)({},e),{},{Icon:t}))}var h=function(e){var t=e.Icon,c=void 0===t?f:t,n=Object(j.a)(e,b);return Object(o.jsx)("div",Object(u.a)(Object(u.a)({},n),{},{className:Object(i.e)(["img-placeholder",n.className]),children:Object(o.jsx)(c,{className:"icon"})}))},f=function(e){return Object(o.jsxs)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},e),{},{children:[Object(o.jsx)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}),Object(o.jsx)("path",{d:"M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"})]}))},x=c(21),v=(c(103),["Icon","label"]),m=["maxSize"],p=["Icon","label"],g=function(e){var t=e.Icon,c=e.label,n=Object(j.a)(e,v),a=n.maxSize,r=Object(j.a)(n,m);return t?Object(o.jsxs)("button",Object(u.a)(Object(u.a)({title:c,type:"button"},r),{},{className:Object(i.e)(["btn btn-icon",n.className]),children:[Object(o.jsx)(t,{className:"icon",height:a,width:a}),c&&Object(o.jsx)("span",{className:"label",children:c})]})):null},N=function(e){var t=e.Icon,c=e.label,n=Object(j.a)(e,p);return t&&n.to?Object(o.jsxs)(x.c,Object(u.a)(Object(u.a)({},n),{},{className:Object(i.e)(["btn btn-icon",n.className]),children:[Object(o.jsx)(t,{className:"icon"}),c&&Object(o.jsx)("span",{className:"label",children:c})]})):null}},19:function(e,t,c){"use strict";c.d(t,"a",(function(){return d}));var n=c(2),a=c(6),r=c(4),s=(c(310),c(0)),i=(c(311),["children"]),o=["children"],l=["title","actions"],u=function(e){var t=e.header,c=e.title,n=e.actions;return t?Object(s.jsx)("header",{className:"miq-view-header",children:Object(s.jsxs)("div",{className:"miq-view-header-inner",children:[Object(s.jsx)("div",{className:"miq-view-title",children:c&&Object(s.jsx)("h2",{children:c})}),n&&Object(s.jsx)("section",{className:"miq-view-actions",children:n})]})}):null},j=function(e){var t=e.children,c=Object(a.a)(e,o),i=c.title,j=c.actions,d=Object(a.a)(c,l),b=i||j;return Object(s.jsxs)("div",Object(n.a)(Object(n.a)({},d),{},{className:Object(r.e)(["miq-view",c.className]),children:[Object(s.jsx)(u,{title:i,actions:j,header:b}),t]}))},d={View:j,List:function(e){var t=e.children,c=Object(a.a)(e,i);return t?Object(s.jsx)(j,Object(n.a)(Object(n.a)({},c),{},{children:t})):Object(s.jsx)(j,Object(n.a)(Object(n.a)({},c),{},{className:Object(r.e)(["miq-view-list",c.className])}))}},b=["children","footer"],O=["children"],h=["children"],f=["children"],x=["children"],v=["children"],m={Sidebar:function(e){var t=e.children,c=Object(a.a)(e,O);return Object(s.jsx)("nav",Object(n.a)(Object(n.a)({},c),{},{className:Object(r.e)(["miq-admin-aside",c.className]),children:t}))},SidebarHeader:function(e){var t=e.children,c=Object(a.a)(e,h);return Object(s.jsx)("header",Object(n.a)(Object(n.a)({},c),{},{className:Object(r.e)(["miq-admin-aside-header",c.className]),children:t}))}},p=Object(n.a)(Object(n.a)({Layout:function(e){var t=e.children,c=Object(a.a)(e,f);return Object(s.jsx)("div",Object(n.a)(Object(n.a)({},c),{},{className:Object(r.e)(["miq-admin",c.className]),children:t}))},Main:function(e){var t=e.children,c=Object(a.a)(e,x);return Object(s.jsx)("main",Object(n.a)(Object(n.a)({},c),{},{className:Object(r.e)(["miq-admin-main",c.className]),role:"main",children:Object(s.jsx)("section",{className:"container",children:t})}))},MobileNavbar:function(e){var t=e.children,c=Object(a.a)(e,v);return Object(s.jsx)("nav",Object(n.a)(Object(n.a)({},c),{},{className:Object(r.e)(["miq-admin-mobile-nav",c.className]),children:t}))}},m),{},{SidebarBody:function(e){var t=e.children,c=e.footer,i=Object(a.a)(e,b);return Object(s.jsxs)("section",Object(n.a)(Object(n.a)({},i),{},{className:Object(r.e)(["miq-admin-aside-body",i.className]),children:[Object(s.jsx)("div",{className:"miq-admin-aside-body-content",children:t}),c&&Object(s.jsx)("div",{className:"miq-admin-aside-body-footer",children:c})]}))}});t.b=p},22:function(e,t,c){"use strict";c.d(t,"a",(function(){return i})),c.d(t,"b",(function(){return l}));var n=c(2),a=c(8),r=c(11),s="sections/",i={list:function(e){return a.a.get(s,e,"SET_SECTIONS")},get:function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PREPEND_SECTION";return a.a.get("".concat(s).concat(e,"/"),t,c)},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PREPEND_SECTION";return a.a.post("".concat(s),e,t)},patch:function(e,t,c){return a.a.patch("".concat(s).concat(e,"/"),t,c,"UPDATE_SECTION")},delete:function(e){return a.a.delete("".concat(s).concat(e,"/"),e,"REMOVE_SECTION")}},o={sections:{results:[]}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.sections,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload,s=void 0===a?{}:a,i=s.results;switch(c){case"SET_SECTIONS":return Object(n.a)({},s);case"APPEND_SECTION":return i=Object(r.b)(e.results,s,"slug",!0),Object(n.a)(Object(n.a)({},e),{},{results:i});case"PREPEND_SECTION":case"UPDATE_SECTION":return i=Object(r.b)(e.results,s),Object(n.a)(Object(n.a)({},e),{},{results:i});case"REMOVE_SECTION":return i=e.results.filter((function(e){return e.slug!==s.slug})),Object(n.a)(Object(n.a)({},e),{},{results:i});default:return Object(n.a)({},e)}}},23:function(e,t,c){"use strict";c.d(t,"a",(function(){return L})),c.d(t,"c",(function(){return V})),c.d(t,"b",(function(){return G}));var n=c(27),a=c(2),r=c(57),s=c(1),i=c(7),o=c(18),l=c(31),u=(c(77),c(15)),j=c(4),d=c(0),b=Object(s.createContext)(),O=function(e){var t=e.children,c=Object(s.useState)({isLoaded:!1}),n=Object(u.a)(c,2),r=n[0],i=n[1],o=window.location.href;return Object(s.useEffect)((function(){Object(j.g)().then((function(e){i(Object(a.a)(Object(a.a)({},e),{},{isLoaded:!0}))})).catch((function(e){i({isLoaded:!1}),console.log(e)}))}),[o]),Object(d.jsx)(b.Provider,{value:r,children:t})},h=c(36),f=c(324),x=c(325),v=c(326),m=c(327),p=c(328),g=c(19),N=c(17);function E(e){return Object(d.jsx)(g.a.View,{title:"Dashboard",children:"Welcome"})}c(312);var y=Object(s.lazy)((function(){return Promise.all([c.e(3),c.e(4)]).then(c.bind(null,353))})),S=Object(s.lazy)((function(){return c.e(5).then(c.bind(null,351))})),w=Object(s.lazy)((function(){return c.e(6).then(c.bind(null,354))}));function D(e){var t=Object(s.useContext)(b),c=e.match.path;return t?t.isLoaded?Object(d.jsxs)(g.b.Layout,{children:[Object(d.jsx)(T,Object(a.a)(Object(a.a)({},e),{},{path:c,ctx:t})),Object(d.jsx)(g.b.Main,{className:"grio-main",children:Object(d.jsx)(s.Suspense,{fallback:Object(d.jsx)(L,{}),children:Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{path:"".concat(c,"documents/"),component:y}),Object(d.jsx)(i.b,{path:"".concat(c,"pages/"),component:S}),Object(d.jsx)(i.b,{path:"".concat(c,"settings/"),component:w}),Object(d.jsx)(i.b,{path:"".concat(c),component:E})]})})}),Object(d.jsx)(I,{})]}):Object(d.jsx)(L,{}):null}var C=function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(P,{to:"".concat(e.path,"settings/"),label:"Settings",Icon:f.a})})},T=function(e){var t=e.path,c=e.ctx,n=void 0===c?{}:c;return Object(d.jsxs)(g.b.Sidebar,{id:"AdminNav",className:"grio-nav",children:[Object(d.jsx)(g.b.SidebarHeader,{children:Object(d.jsx)("h1",{children:n.site.name})}),Object(d.jsxs)(g.b.SidebarBody,{footer:Object(d.jsx)(C,{path:t}),children:[Object(d.jsx)(P,{exact:!0,to:"/grio/",label:"Dashboard",Icon:x.a}),Object(d.jsx)("div",{className:"grio-nav-items",children:Object(d.jsx)(P,{to:"".concat(t,"documents/"),label:"Documents",Icon:v.a})}),Object(d.jsx)(P,{to:"".concat(t,"pages/"),label:"Pages",Icon:m.a}),Object(d.jsx)(P,{to:"".concat(t,"staff/"),label:"Staff",Icon:p.a})]})]})},P=function(e){return Object(d.jsx)("div",{className:"grio-nav-item",children:Object(d.jsx)(N.b,Object(a.a)(Object(a.a)({},e),{},{className:"grio-nav-link"}))})},I=function(e){return Object(d.jsx)(g.b.MobileNavbar,{className:"grio-mobile-nav",children:"Mobile"})},_=c(25),A=c(56),k=c(22),R={docs:A.b,pages:_.c,sections:k.b},M=Object(s.lazy)((function(){return Promise.resolve().then(c.bind(null,36))})),L=function(e){return Object(d.jsx)("div",{children:"Loading ..."})},q=Object(l.b)(Object(a.a)({},R)),U=[r.a],F=[l.a.apply(void 0,U)];j.b&&(F=[].concat(Object(n.a)(F),[window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}]));var V=Object(l.d)(q,{},l.c.apply(void 0,Object(n.a)(F)));function G(e){return Object(d.jsx)(O,{children:Object(d.jsx)(o.a,{store:V,children:Object(d.jsx)("div",{id:"Grio",children:Object(d.jsx)(s.Suspense,{fallback:Object(d.jsx)(L,{}),children:Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{path:"".concat(h.EDITOR_PATH),component:M}),Object(d.jsx)(i.b,{component:D})]})})})})})}},25:function(e,t,c){"use strict";c.d(t,"b",(function(){return u})),c.d(t,"c",(function(){return j})),c.d(t,"a",(function(){return d}));var n=c(26),a=c(2),r=c(6),s=c(8),i=c(36),o=["results"],l={results:[],items:{}},u={path:"pages/",list:function(e){return s.a.get(this.path,e,"SET_PAGES")},get:function(e,t){return s.a.get("".concat(this.path).concat(e,"/"),t,"ADD_UPDATE_PAGE")},post:function(e){return s.a.post("".concat(this.path),e,"ADD_UPDATE_PAGE")},patch:function(e,t,c){return s.a.patch("".concat(this.path).concat(e,"/"),t,c)},postSection:function(e,t){return s.a.post("".concat(this.path).concat(e,"/section/"),t,"APPEND_SECTION")},delete:function(e){return s.a.delete("".concat(this.path).concat(e,"/"),e,"REMOVE_PAGE")}},j=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,c=arguments.length>1?arguments[1]:void 0,s=c.type,i=c.payload,u=void 0===i?{}:i;switch(s){case"SET_PAGES":var j=u.results,d=Object(r.a)(u,o);return t=Object(a.a)({},d),j&&(e={},j.forEach((function(t){e["".concat(t.slug)]=t})),t=Object(a.a)(Object(a.a)({},t),{},{items:e})),t;case"ADD_UPDATE_PAGE":return e=Object(a.a)(Object(a.a)({},t.items),{},Object(n.a)({},u.slug,u)),Object(a.a)(Object(a.a)({},t),{},{items:e});case"REMOVE_PAGE":return delete(e=t.items)[u.slug],Object(a.a)(Object(a.a)({},t),{},{items:e});default:return Object(a.a)({},t)}},d=function(e){return"".concat(i.PAGE_CREATE_PATH).concat(e,"/")}},310:function(e,t,c){},311:function(e,t,c){},312:function(e,t,c){},313:function(e,t,c){},314:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(24),s=c.n(r),i=c(21),o=c(7),l=c(23),u=(c(313),function(e){e&&e instanceof Function&&c.e(7).then(c.bind(null,352)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))}),j=c(0),d=document.getElementById("root");d&&s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(i.a,{children:Object(j.jsx)(o.d,{children:Object(j.jsx)(o.b,{path:"/grio/",component:l.b})})})}),d),u()},35:function(e,t,c){"use strict";var n=c(2),a=c(6),r=(c(99),c(4)),s=c(0),i=["id","clearFocus","value","onChange","placeholder"],o=(0,c(1).forwardRef)((function(e,t){var c=e.id,o=e.clearFocus,l=e.value,u=e.onChange,j=e.placeholder,d=void 0===j?"Start typing ...":j,b=Object(a.a)(e,i),O=e.style;return Object(s.jsxs)("div",{id:c,className:Object(r.e)(["textareax",o&&"clear-focus"]),children:[Object(s.jsx)("span",{className:"textareax-mirror",style:O,children:"".concat(l,"\n")}),Object(s.jsx)("div",{className:"textareax-input",children:Object(s.jsx)("textarea",Object(n.a)(Object(n.a)({},b),{},{value:l,onChange:u,placeholder:d,style:O,ref:t}))})]})}));t.a=o},36:function(e,t,c){"use strict";c.r(t),c.d(t,"EDITOR_PATH",(function(){return he})),c.d(t,"PAGE_CREATE_PATH",(function(){return fe})),c.d(t,"default",(function(){return xe}));var n=c(2),a=c(7),r=(c(97),c(1)),s=c(18),i=c(25),o=c(15),l=c(6),u=(c(98),c(3)),j=c.n(u),d=c(35),b=c(4),O=Object(r.createContext)(null),h=O.Provider,f=O,x=c(0),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.forwardRef)((function(c,a){c=Object(n.a)(Object(n.a)({},t),c);var s=Object(r.useContext)(f)||Object(b.h)("FormCtx"),i=c.name,o=void 0===i?Object(b.h)("name prop"):i,l=c,u=l.value,j=l.checked,d=l.onChange;return Object.keys(s.values).includes(o)&&("checkbox"===c.type?j=s.values[o]:u=s.values[o]),d=d||s.handleChange,Object(x.jsx)(e,Object(n.a)(Object(n.a)({},c),{},{className:Object(b.e)([t.className,c.className]),value:u,checked:j,onChange:d,ref:a}))}))},m=v("input",{className:"input"});m.propTypes={id:j.a.string,className:j.a.string,value:j.a.string,required:j.a.bool,disabled:j.a.bool};var p=v("input",{type:"checkbox",className:"input input-checkbox"});p.propTypes={id:j.a.string,className:j.a.string,value:j.a.any,checked:j.a.bool,required:j.a.bool,disabled:j.a.bool};var g=v("textarea",{className:"textarea"}),N=v(d.a);b.b&&(m.displayName="TextInput",p.displayName="CheckboxInput",g.displayName="TextArea",N.displayName="TextAreaX");var E=c(26);function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(Object(n.a)({},e)),c=Object(o.a)(t,2),a=c[0],s=c[1],i=Object(r.useState)({}),l=Object(o.a)(i,2),u=l[0],j=l[1],d=function(e,t){s(Object(n.a)(Object(n.a)({},a),{},Object(E.a)({},e,t)))},b=function(e){var t=e.target.name;return d(t,!a[t])},O=function(e){switch(e.target.type){case"checkbox":return b(e);default:return d(e.target.name,e.target.value)}};return{values:a,handleChange:O,toggleCheck:b,setValue:d,setValues:s,errors:u,setErrors:j}}var S=["children","context"],w=Object(r.forwardRef)((function(e,t){var c=e.children,a=e.context,r=Object(l.a)(e,S);return Object(x.jsx)(h,{value:a,children:Object(x.jsx)("form",Object(n.a)(Object(n.a)({},r),{},{ref:t,children:c}))})}));w.TextInput=m,w.CheckboxInput=p,w.TextArea=g,w.TextAreaX=N;var D=w,C=(c(100),c(319)),T=c(320),P=c(17),I=c(315),_=c(316),A=c(317),k=c(318),R=function(e){var t=e.sourceSlug,c=void 0===t?Object(b.h)("section source slug"):t,n=e.type,a=void 0===n?Object(b.h)("section type"):n;return Object(x.jsxs)("button",{onClick:function(){i.b.postSection(c,{type:a})},children:["Add ",a]})},M=function(e){var t=e.context,c=void 0===t?Object(b.h)("section context"):t,n=e.form,a=void 0===n?Object(b.h)("form context"):n,r=e.data,s=void 0===r?Object(b.h)("section data"):r;return Object(x.jsx)(P.a,{Icon:I.a,label:"Save",className:"section-btn",title:"Save",onClick:function(t){var n=s.text!==a.values.text;if(console.log("Saving",n),!n)return c.setEdit(!c.isEdit);e.onSave&&e.onSave()}})},L=function(e){console.log(e);var t=e.context,c=void 0===t?Object(b.h)("section context"):t,a=e.data,r=void 0===a?Object(b.h)("section data"):a;return Object(x.jsx)(P.a,Object(n.a)(Object(n.a)({},e),{},{Icon:_.a,className:"section-btn btn-danger",title:"Delete",onClick:function(){return c.remove(r.slug)}}))},q=function(e){var t=e.context,c=void 0===t?Object(b.h)("section context"):t,a=c.isEdit;return a?Object(x.jsx)(M,Object(n.a)({},e)):Object(x.jsx)(P.a,{Icon:a?A.a:k.a,className:"section-btn",title:a?"Preview Mode":"Edit Mode",onClick:function(){return c.setEdit(!a)}})},U=function(e){var t=e.children,c=e.id,n=e.className;return Object(x.jsx)("div",{id:c,className:Object(b.e)(["section-body",n]),children:t})},F=function(e){var t=e.children,c=e.Icon,n=e.id,a=e.className;return Object(x.jsxs)("div",{id:n,className:Object(b.e)(["section-header",a]),children:[c&&Object(x.jsx)("div",{className:"",children:Object(x.jsx)(c,{className:"icon"})}),t]})},V=function(e){var t=e.children,c=e.id,n=e.className;return Object(x.jsx)("div",{id:c,className:Object(b.e)(["section-footer",n]),children:t})},G=function(e){var t=e.children;return Object(x.jsx)("div",{className:"",onClick:function(){return console.log("Uploading...")},children:t})},H=function(e){var t=e.tab;return"library"===t?Object(x.jsx)(X,Object(n.a)({},e)):"unsplash"===t?Object(x.jsx)(z,Object(n.a)({},e)):Object(x.jsxs)("div",{className:"tab-upload",children:[Object(x.jsx)("div",{className:"",children:"Click to upload an image"}),Object(x.jsx)("div",{className:"",children:"or"}),Object(x.jsx)("div",{className:"",children:"Paste url"})]})},X=function(e){return Object(x.jsx)("div",{className:"tab-library",children:"Images from library"})},z=function(e){return Object(x.jsx)("div",{className:"tab-unsplash",children:"Images from unsplash"})},B=function(e){var t=Object(r.useState)("new"),c=Object(o.a)(t,2),n=c[0],a=c[1];return Object(x.jsxs)("div",{className:"section-edit",children:[Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)("button",{onClick:function(){return a("new")},children:"New"}),Object(x.jsx)("button",{onClick:function(){return a("library")},children:"Library"}),Object(x.jsx)("button",{onClick:function(){return a("unsplash")},children:"Unsplash"})]}),Object(x.jsx)(H,{tab:n}),Object(x.jsx)(G,{})]})},W=function(e){var t=e.data;if(e.context.isEdit)return Object(x.jsx)(B,Object(n.a)({},e));return Object(x.jsxs)("div",{className:Object(b.e)(["section-preview",!t.image&&"empty"]),onClick:function(){return e.context.setEdit(!e.context.isEdit)},children:[Object(x.jsx)(P.c,{Icon:C.a,src:"https://images.unsplash.com/photo-1621570070821-2e2b1358fae3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxMTc3M3wxfDF8YWxsfDF8fHx8fHwyfHwxNjIxOTkyNDMw&ixlib=rb-1.2.1&q=80&w=2000"}),!t.image&&Object(x.jsx)("span",{children:"Click to upload an image"})]})},J=Object(r.forwardRef)((function(e,t){return Object(x.jsxs)("div",{id:e.id,ref:t,className:Object(b.e)([e.className,"section-img"]),children:[Object(x.jsx)(F,{Icon:T.a}),Object(x.jsx)(U,{children:Object(x.jsx)(W,Object(n.a)({},e))}),Object(x.jsx)(V,{children:Object(x.jsx)("div",{className:"actions",children:Object(x.jsx)(L,Object(n.a)({},e))})})]})}));b.b&&(J.displayName="ImageSection");var K=J,Y=(c(105),c(321)),Q=c(38),Z=c.n(Q);c(59);Z.a.setOptions({renderer:new Z.a.Renderer,highlight:function(e,t){var n=c(107),a=n.getLanguage(t)?t:"plaintext";return n.highlight(e,{language:a}).value},pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});function $(e){var t=e.type;switch(void 0===t?Object(b.h)("section type"):t){case"MD":return Z()(e.text);default:return"<div>".concat(e.text,"</div>")}}var ee=function(e){return Object(x.jsx)("div",{className:"",children:Object(x.jsx)(D.TextAreaX,{autoFocus:!0,clearFocus:!0,name:"text",placeholder:"# Mardown is supported ..."})})},te=function(e){return e.context.isEdit?Object(x.jsx)(ee,Object(n.a)({},e)):Object(x.jsx)("div",{className:"",children:Object(x.jsx)("div",{dangerouslySetInnerHTML:{__html:e.data.html||"Nothing to preview"}})})},ce=Object(r.forwardRef)((function(e,t){var c=y({text:e.data.text||""}),a=e.data,r=e.context.update;return Object(x.jsx)(h,{value:c,children:Object(x.jsxs)("div",{id:e.id,ref:t,className:Object(b.e)([e.className,"section-md"]),children:[Object(x.jsx)(F,{Icon:Y.a}),Object(x.jsx)(U,{children:Object(x.jsx)(te,Object(n.a)({},e))}),Object(x.jsx)(V,{children:Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsx)(L,Object(n.a)(Object(n.a)({},e),{},{label:"Delete"})),Object(x.jsx)("div",{className:"actions-primary",children:Object(x.jsx)(q,{context:e.context,form:c,data:e.data,onSave:function(){if(a){var t=a.type;r(e.data.slug,{type:t,text:c.values.text,html:$(Object(n.a)(Object(n.a)({},c.values),{},{type:t}))},{type:t,text:a.text}).then((function(t){e.context.setEdit(!1)}))}}})})]})})]})})}));b.b&&(ce.displayName="MarkdownSection");var ne=ce,ae=c(322),re=function(e){return Object(x.jsx)("div",{className:"",children:"TxtSectionEdit"})},se=function(e){return e.context.isEdit?Object(x.jsx)(re,Object(n.a)({},e)):Object(x.jsx)("div",{className:"",children:"Prev"})},ie=Object(r.forwardRef)((function(e,t){return Object(x.jsxs)("div",{id:e.id,ref:t,className:Object(b.e)([e.className]),children:[Object(x.jsx)(F,{Icon:ae.a}),Object(x.jsx)(U,{children:Object(x.jsx)(se,Object(n.a)({},e))}),Object(x.jsx)(V,{children:Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsx)(L,Object(n.a)(Object(n.a)({},e),{},{label:"Delete"})),Object(x.jsx)(q,{context:e.context})]})})]})}));b.b&&(ie.displayName="TextSection");var oe=ie,le=c(22),ue=Object(r.createContext)();function je(e){var t=e.data,c=void 0===t?Object(b.h)("section data props"):t,a=c.slug,i=c.type,l=Object(r.useRef)(),u=Object(r.useState)(e.isEdit||!1),j=Object(o.a)(u,2),d=j[0],O=j[1],h=Object(s.b)(),f=Object(r.useMemo)((function(){return{isEdit:d,setEdit:O,update:le.a.patch,remove:le.a.delete,dispatch:h}}),[d,h]);if(!a)return null;var v=function(e){switch(e){case"MD":return ne;case"IMG":return K;default:return oe}}(i);return Object(x.jsx)(ue.Provider,{value:f,children:Object(x.jsx)(v,Object(n.a)({},Object(n.a)(Object(n.a)({},e),{},{ref:l,context:f,className:Object(b.e)(["section",d&&"active"])})))})}var de=["sourceSlug","children"];function be(e){var t=e.sourceSlug,c=void 0===t?Object(b.h)("source slug"):t,n=e.children,a=Object(l.a)(e,de),s=Object(r.useState)(1),i=Object(o.a)(s,2),u=i[0],j=i[1],d=a.sourceData,O=void 0===d?Object(b.h)("source data"):d;Object(r.useEffect)((function(){c&&le.a.list({source:c}).then((function(){j(0)}))}),[c]);var h=y({label:O.label||""});return u?Object(x.jsx)("div",{children:"Loading ..."}):Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(D,{context:h,onSubmit:function(e){return e.preventDefault()},children:n})})}be.Panel=function(e){var t=Object(s.c)((function(e){return e.sections}));return t?Object(x.jsx)("div",{className:"editor-panel",children:Object(x.jsxs)("div",{className:"editor-content",children:[Object(x.jsx)("div",{className:"editor-label",children:Object(x.jsx)(D.TextAreaX,{name:"label",tabIndex:1,maxLength:250})}),Object(x.jsx)("div",{className:"editor-sections",children:t.results.map((function(e){return Object(x.jsx)(je,{data:e},e.slug)}))}),Object(x.jsxs)("div",{className:"editor-actions",children:[Object(x.jsx)(R,{sourceSlug:e.sourceSlug,type:"TXT"}),Object(x.jsx)(R,{sourceSlug:e.sourceSlug,type:"MD"}),Object(x.jsx)(R,{sourceSlug:e.sourceSlug,type:"IMG"})]})]})}):null};var Oe=c(323),he="/grio/editor/",fe="".concat(he,"pages/");function xe(e){var t=e.match.path;return Object(x.jsx)("div",{className:"editor",children:Object(x.jsxs)(a.d,{children:[Object(x.jsx)(a.b,{path:"".concat(t,"pages/:pageSlug/"),component:me}),Object(x.jsx)(a.b,{path:"".concat(t,"pages/"),component:ve}),Object(x.jsx)(a.a,{to:fe})]})})}var ve=function(e){return Object(x.jsx)("div",{className:"view",children:"page add"})},me=function(e){var t=e.match.params.pageSlug,c=Object(s.b)();Object(r.useEffect)((function(){t&&i.b.get(t).catch((function(e){}))}),[t]);var a=Object(s.c)((function(e){return e.pages.items}))["".concat(t)];return a?Object(x.jsx)(be,{sourceSlug:t,sourceData:a,children:Object(x.jsx)("div",{className:"view",children:Object(x.jsxs)("section",{className:"view-content",children:[Object(x.jsx)(pe,Object(n.a)(Object(n.a)({},e),{},{pageSlug:t,dispatch:c,page:a})),Object(x.jsx)(be.Panel,{sourceSlug:t})]})})}):null},pe=function(e){return Object(x.jsx)("header",{className:"view-header",children:Object(x.jsx)(P.b,{label:"Pages",Icon:Oe.a,to:"/grio/pages/"})})}},4:function(e,t,c){"use strict";c.d(t,"b",(function(){return l})),c.d(t,"a",(function(){return u})),c.d(t,"d",(function(){return d})),c.d(t,"g",(function(){return b})),c.d(t,"e",(function(){return O})),c.d(t,"f",(function(){return h})),c.d(t,"c",(function(){return f})),c.d(t,"h",(function(){return x}));var n=c(41),a=c.n(n),r=c(58),s=c(2),i=c(16),o=c.n(i),l=(c(20),!1),u=l?"http://127.0.0.1:8000":"".concat(window.location.origin);o.a.defaults.xsrfCookieName="csrftoken",o.a.defaults.xsrfHeaderName="X-CSRFTOKEN",o.a.defaults.headers["Content-Type"]="text/html; charset=UTF-8",o.a.defaults.headers.post["Content-Type"]="application/json";var j=o.a.create({baseURL:u,timeout:3e3,withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"},onUploadProgress:function(e){}}),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{weekday:"short",month:"long",day:"numeric"},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US",n=new Intl.DateTimeFormat(c,Object(s.a)({},t));return n.format(new Date(e))},b=function(){return new Promise(function(){var e=Object(r.a)(a.a.mark((function e(t,c){var n,r,s,i,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=document.getElementById("sharedData"))||!l){e.next=17;break}return console.log("Getting page shared data in ".concat("production"," mode")),r=new URL(window.location.href),s="".concat(r.pathname).concat(r.search),e.prev=5,e.next=8,j.get(s);case 8:i=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",c(e.t0));case 14:if(i&&200===i.status){e.next=16;break}return e.abrupt("return",c("No data"));case 16:i.headers["content-type"].includes("text")&&(o=new DOMParser,u=o.parseFromString(i.data,"text/html"),n=u.getElementById("sharedData"));case 17:if(!n){e.next=19;break}return e.abrupt("return",t(JSON.parse(n.textContent)));case 19:return e.abrupt("return",t({}));case 20:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,c){return e.apply(this,arguments)}}())},O=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)&&(e=t.map((function(e){return e&&"".concat(e)})).filter(Boolean).join(" ")),e},h=function(e){if(l&&e){var t=new URL(u);e.includes("http")||(e="".concat(t.origin).concat(e))}return e},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x("string param");return e.endsWith("/")?e:"".concat(e,"/")},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Param";throw new Error("".concat(e," is required"))}},56:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return l}));var n=c(2),a=c(4),r=c(8),s=c(11),i={results:[]},o={path:"documents/",list:function(e){return r.a.get(this.path,e,"SET_DOCS")},get:function(e,t){return r.a.get("".concat(this.path).concat(e,"/"),t,"ADD_UPDATE_DOC")},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(a.h)("file"),t=e.name;if(t.length>=100)return Promise.reject("File name is too long");var c=new FormData;return c.append("src",e,t),r.a.post("".concat(this.path),c,"PREPEND_DOC",s.a,{headers:{"content-type":"multipart/form-data"}})},patch:function(e,t,c){return r.a.patch("".concat(this.path).concat(e,"/"),t,c,"ADD_UPDATE_DOC")},delete:function(e){return r.a.delete("".concat(this.path).concat(e,"/"),e,"REMOVE_DOC")}},l=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,c=arguments.length>1?arguments[1]:void 0,a=c.type,r=c.payload,o=void 0===r?{}:r;switch(a){case"SET_DOCS":return Object(n.a)({},o);case"APPEND_DOC":return e=Object(s.b)(t.results,o,"slug",!0),Object(n.a)(Object(n.a)({},t),{},{results:e});case"ADD_UPDATE_DOC":case"PREPEND_DOC":return e=Object(s.b)(t.results,o),Object(n.a)(Object(n.a)({},t),{},{results:e});case"REMOVE_DOC":return e=t.results.filter((function(e){return e.slug!==o.slug})),Object(n.a)(Object(n.a)({},t),{},{results:e});default:return Object(n.a)({},t)}}},77:function(e,t,c){},8:function(e,t,c){"use strict";var n=c(2),a=c(20),r=c(23),s=c(11),i={get:function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.a;return new Promise((function(s,i){return n.get(e,{params:t}).then((function(e){var t=e.data;return Object(a.isString)(c)&&r.c.dispatch({type:c,payload:t}),s(t)})).catch((function(e){return i(e)}))}))},post:function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.a,i=arguments.length>4?arguments[4]:void 0;return new Promise((function(s,o){n.post(e,t,i).then((function(e){var t=e.data;return Object(a.isString)(c)&&r.c.dispatch({type:c,payload:t}),s(t)})).catch((function(e){return o(e)}))}))},patch:function(e,t,c,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.a;return new Promise((function(s,l){if(c&&Object(a.isEqual)(t,c))return s({isUpdated:!1});o.patch(e,t).then((function(e){var t=e.data;return Object(a.isString)(i)&&r.c.dispatch({type:i,payload:t}),s(Object(n.a)(Object(n.a)({},t),{},{isUpdated:!0}))})).catch((function(e){return l(e)}))}))},delete:function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.a;return new Promise((function(s,i){return n.delete(e).then((function(e){if(204===!e.status)return i(e);Object(a.isString)(c)&&r.c.dispatch({type:c,payload:{slug:t}}),s({deleted:!0})})).catch((function(e){return i(e)}))}))}};t.a=i},97:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[314,1,2]]]);
//# sourceMappingURL=main.ab2b623b.chunk.js.map