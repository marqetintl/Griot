(this["webpackJsonp@grio/client"]=this["webpackJsonp@grio/client"]||[]).push([[4],{327:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return I}));var n=c(15),s=c(1),i=c(3),r=c(4),a=(c(97),c(2)),o=c(19),u=c(91),l=c(92),j=(c(98),c(0)),d=function(e){return Object(j.jsx)("div",{className:"",children:"TxtSectionEdit"})},b=function(e){return e.context.isEdit?Object(j.jsx)(d,Object(a.a)({},e)):Object(j.jsx)("div",{className:"",children:"Prev"})},O=Object(s.forwardRef)((function(e,t){return Object(j.jsxs)("div",{id:e.id,ref:t,className:Object(r.e)([e.className]),children:[Object(j.jsx)(l.c,{Icon:o.e.TextareaT}),Object(j.jsx)(l.a,{children:Object(j.jsx)(b,Object(a.a)({},e))}),Object(j.jsx)(l.b,{children:Object(j.jsxs)("div",{className:"actions",children:[Object(j.jsx)(u.a,Object(a.a)(Object(a.a)({},e),{},{label:"Delete"})),Object(j.jsx)(u.b,{context:e.context})]})})]})}));r.b&&(O.displayName="TextSection");var f=O,v=(c(99),Object(s.createContext)());function h(e){var t=e.data,i=void 0===t?Object(r.i)("section data props"):t,o=i.slug,u=i.type,l=Object(s.useRef)(),d=Object(s.useState)(e.isEdit||!1),b=Object(n.a)(d,2),O=b[0],h=b[1],x=Object(s.useMemo)((function(){return{isEdit:O,setEdit:h}}),[O]);if(!o)return null;var N=function(e){switch(e){case"MD":return Object(s.lazy)((function(){return Promise.all([c.e(2),c.e(6)]).then(c.bind(null,328))}));case"IMG":return Object(s.lazy)((function(){return c.e(8).then(c.bind(null,326))}));default:return f}}(u);return Object(j.jsx)(s.Suspense,{fallback:Object(j.jsx)("div",{children:"Loading ..."}),children:Object(j.jsx)(v.Provider,{value:x,children:Object(j.jsx)(N,Object(a.a)(Object(a.a)({},e),{},{context:x,ref:l,className:Object(r.e)(["section",O&&"active"])}))})})}var x={path:"sections/",list:function(e,t){return console.log(t),Object(r.g)(e,this.path,t,"SET_SECTIONS")},get:function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PREPEND_SECTION";return actions.get("".concat(this.path).concat(e,"/"),t,c)},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PREPEND_SECTION";return actions.post("".concat(path),e,t)},patch:function(e,t,c){return actions.patch("".concat(path).concat(e,"/"),t,c,"UPDATE_SECTION")},delete:function(e){return actions.delete("".concat(path).concat(e,"/"),e,"REMOVE_SECTION")}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{results:[]},t=arguments.length>1?arguments[1]:void 0,c=t.type,n=t.payload,s=void 0===n?{}:n,i=s.results;switch(c){case"SET_SECTIONS":return Object(a.a)({},s);case"APPEND_SECTION":return i=addOrUpdateArrayObject(e.results,s,"slug",!0),Object(a.a)(Object(a.a)({},e),{},{results:i});case"PREPEND_SECTION":case"UPDATE_SECTION":return i=addOrUpdateArrayObject(e.results,s),Object(a.a)(Object(a.a)({},e),{},{results:i});case"REMOVE_SECTION":return i=e.results.filter((function(e){return e.slug!==s.slug})),Object(a.a)(Object(a.a)({},e),{},{results:i});default:return Object(a.a)({},e)}},g=["sourceSlug","children"],E=["sourceSlug","request"];function p(e){var t=e.sourceSlug,c=(void 0===t&&Object(r.i)("source slug"),e.children);Object(i.a)(e,g);return Object(j.jsx)("div",{className:"",children:c})}var S=function(e){var t=e.sourceSlug,c=void 0===t?Object(r.i)("source slug"):t,a=e.request,o=void 0===a?Object(r.i)("request"):a,u=(Object(i.a)(e,E),Object(s.useReducer)(N,{results:[]})),l=Object(n.a)(u,2),d=l[0],b=l[1];return Object(s.useEffect)((function(){c&&x.list(o,{source:c}).then((function(e){b({type:"SET_SECTIONS",payload:e})}))}),[c,o]),Object(j.jsx)("div",{className:"editor-panel",children:Object(j.jsxs)("div",{className:"editor-content",children:[Object(j.jsx)("div",{className:"editor-label"}),Object(j.jsx)("div",{className:"editor-sections",children:d.results.map((function(e){return Object(j.jsx)(h,{data:e},e.slug)}))}),Object(j.jsx)("div",{className:"editor-actions"})]})})},m=c(93),T=c(21);function I(e){var t=e.match.params.pageSlug,c=Object(s.useState)({}),i=Object(n.a)(c,2),r=i[0],a=i[1];return Object(s.useEffect)((function(){t&&m.a.get(t).then((function(e){return a(e)})).catch((function(e){}))}),[t]),r&&r.slug?Object(j.jsx)(p,{sourceSlug:r.slug,className:"",children:Object(j.jsxs)("div",{className:"",children:[r.slug,Object(j.jsx)(S,{sourceSlug:r.slug,request:T.a})]})}):null}},91:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return u}));var n=c(2),s=c(19),i=c(4),r=c(0),a=function(e){var t=e.context,c=void 0===t?Object(i.i)("section context"):t,n=e.form,a=void 0===n?Object(i.i)("form context"):n,o=e.data,u=void 0===o?Object(i.i)("section data"):o;return Object(r.jsx)(s.c,{Icon:s.e.ArrowUpCircle,label:"Save",className:"section-btn",title:"Save",onClick:function(t){var n=u.text!==a.values.text;if(console.log("Saving",n),!n)return c.setEdit(!c.isEdit);e.onSave&&e.onSave()}})},o=function(e){console.log(e);var t=e.context,c=void 0===t?Object(i.i)("section context"):t,a=e.data,o=void 0===a?Object(i.i)("section data"):a;return Object(r.jsx)(s.c,Object(n.a)(Object(n.a)({},e),{},{Icon:s.e.Trash,className:"section-btn btn-danger",title:"Delete",onClick:function(){return c.remove(o.slug)}}))},u=function(e){var t=e.context,c=void 0===t?Object(i.i)("section context"):t,o=c.isEdit;return o?Object(r.jsx)(a,Object(n.a)({},e)):Object(r.jsx)(s.c,{Icon:o?s.e.Eye:s.e.PencilSquare,className:"section-btn",title:o?"Preview Mode":"Edit Mode",onClick:function(){return c.setEdit(!o)}})}},92:function(e,t,c){"use strict";c.d(t,"a",(function(){return i})),c.d(t,"c",(function(){return r})),c.d(t,"b",(function(){return a}));var n=c(4),s=c(0),i=function(e){var t=e.children,c=e.id,i=e.className;return Object(s.jsx)("div",{id:c,className:Object(n.e)(["section-body",i]),children:t})},r=function(e){var t=e.children,c=e.Icon,i=e.id,r=e.className;return Object(s.jsxs)("div",{id:i,className:Object(n.e)(["section-header",r]),children:[c&&Object(s.jsx)("div",{className:"",children:Object(s.jsx)(c,{className:"icon"})}),t]})},a=function(e){var t=e.children,c=e.id,i=e.className;return Object(s.jsx)("div",{id:c,className:Object(n.e)(["section-footer",i]),children:t})}},93:function(e,t,c){"use strict";c.d(t,"a",(function(){return i}));c(33),c(2),c(3);var n=c(4),s=c(21),i={path:"pages/",list:function(e){return Object(n.g)(s.a,this.path,e)},get:function(e,t){return Object(n.g)(s.a,"".concat(this.path).concat(e,"/"),t)}}},97:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}}]);
//# sourceMappingURL=4.f7a14cec.chunk.js.map