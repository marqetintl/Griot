{"version":3,"sources":["../../../../../packages/miq-dms/src/index.jsx"],"names":["DocumentReadOnlyView","lazy","DocumentUpdateView","DocumentTableView","DocumentRoutes","props","path","match","fallback","component","requiredPerms","docsReducer","results","state","action","type","payload","addOrUpdateArrayObject","filter","slug"],"mappings":"4RASMA,EAAuBC,gBAAK,kBAAM,kCAClCC,EAAqBD,gBAAK,kBAAM,iCAChCE,EAAoBF,gBAAK,kBAAM,kCAQtB,SAASG,EAAeC,GACnC,IAAQC,EAASD,EAAME,MAAfD,KAER,OACI,cAAC,WAAD,CAAUE,SAAU,8CAApB,SACI,eAAC,IAAD,WACI,cAAC,IAAD,CACIF,KAAI,UAAKA,EAAL,kBACJG,UAAWT,EACXU,cAAe,CAAC,2BAEpB,cAAC,IAAD,CACIJ,KAAI,UAAKA,EAAL,aACJG,UAAWP,EACXQ,cAAe,CAAC,6BAEpB,cAAC,IAAD,CAAYJ,KAAMA,EAAMG,UAAWN,EAAmBO,cAAe,CAAC,gCAa/E,IAAMC,EAAc,WAAsC,IAEzDC,EAFoBC,EAAoC,uDAA5B,CAAED,QAAS,IAAME,EAAW,uCACpDC,EAAuBD,EAAvBC,KAAR,EAA+BD,EAAjBE,eAAd,MAAwB,GAAxB,EAGA,OAAQD,GACJ,IAAK,WACD,OAAO,eAAKC,GAEhB,IAAK,aAED,OADAJ,EAAUK,YAAuBJ,EAAMD,QAASI,EAAS,QAAQ,GAC1D,2BAAKH,GAAZ,IAAmBD,YAEvB,IAAK,iBACL,IAAK,cAED,OADAA,EAAUK,YAAuBJ,EAAMD,QAASI,GACzC,2BAAKH,GAAZ,IAAmBD,YAEvB,IAAK,aAED,OADAA,EAAUC,EAAMD,QAAQM,QAAO,qBAAGC,OAAoBH,EAAQG,QACvD,2BAAKN,GAAZ,IAAmBD,YAEvB,QACI,OAAO,eAAKC","file":"static/js/7.2ce9940a.chunk.js","sourcesContent":["import { Switch } from \"react-router-dom\";\n\nimport { addOrUpdateArrayObject } from \"@miq/utils\";\nimport { AdminRoute } from \"@miq/admin\";\n\nimport \"./index.scss\";\n\nimport { lazy, Suspense } from \"react\";\n\nconst DocumentReadOnlyView = lazy(() => import(\"./DocumentReadOnlyView\"));\nconst DocumentUpdateView = lazy(() => import(\"./DocumentUpdateView\"));\nconst DocumentTableView = lazy(() => import(\"./DocumentTableView\"));\n\n/**\n *\n * @param {Object} props\n * @returns\n */\n\nexport default function DocumentRoutes(props) {\n    const { path } = props.match;\n\n    return (\n        <Suspense fallback={<div>Loading ...</div>}>\n            <Switch>\n                <AdminRoute\n                    path={`${path}:docSlug/view/`}\n                    component={DocumentReadOnlyView}\n                    requiredPerms={[\"miq_dms.view_document\"]}\n                />\n                <AdminRoute\n                    path={`${path}:docSlug/`}\n                    component={DocumentUpdateView}\n                    requiredPerms={[\"miq_dms.change_document\"]}\n                />\n                <AdminRoute path={path} component={DocumentTableView} requiredPerms={[\"miq_dms.view_document\"]} />\n            </Switch>\n        </Suspense>\n    );\n}\n\n/**\n *\n * @param {*} state\n * @param {*} action\n * @returns\n */\n\nexport const docsReducer = (state = { results: [] }, action) => {\n    const { type, payload = {} } = action;\n    let results;\n\n    switch (type) {\n        case \"SET_DOCS\":\n            return { ...payload };\n\n        case \"APPEND_DOC\":\n            results = addOrUpdateArrayObject(state.results, payload, \"slug\", true);\n            return { ...state, results };\n\n        case \"ADD_UPDATE_DOC\":\n        case \"PREPEND_DOC\":\n            results = addOrUpdateArrayObject(state.results, payload);\n            return { ...state, results };\n\n        case \"REMOVE_DOC\":\n            results = state.results.filter(({ slug }) => slug !== payload.slug);\n            return { ...state, results };\n\n        default:\n            return { ...state };\n    }\n};\n"],"sourceRoot":""}