(this["webpackJsonp@grio/app"]=this["webpackJsonp@grio/app"]||[]).push([[0],{15:function(e,t,c){"use strict";c.d(t,"c",(function(){return j})),c.d(t,"a",(function(){return f})),c.d(t,"b",(function(){return x}));c(88),c(33),c(0);var n=c(22),a=c.n(n),r=c(3),s=c.n(r),i=c(4),o=(c(89),c(1)),l=function(e){var t=e.children;return a.a.createPortal(t,document.body)};l.Modal=function(e){var t=e.id,c=e.header,n=e.children,a=e.footer,r=e.fullscreen;return Object(o.jsxs)("div",{id:t,className:"modal-container",children:[Object(o.jsx)("div",{className:"modal-background"}),Object(o.jsx)("div",{className:"modal-inner",children:Object(o.jsx)("div",{className:"modal-content",children:Object(o.jsxs)("div",{className:Object(i.d)(["modal-content-inner",r&&"modal-content-inner-fullscreen"]),children:[c&&Object(o.jsx)("div",{className:"modal-header",children:c}),Object(o.jsx)("div",{className:"modal-body",children:n}),a&&Object(o.jsx)("div",{className:"modal-footer",children:a})]})})})]})},l.propTypes={children:s.a.node.isRequired};var u=c(2),d=c(7);c(90);function j(e){var t=e.Icon,c=e.src,n=Object(d.a)(e,["Icon","src"]);return c?(c=Object(i.e)(c),Object(o.jsx)("img",Object(u.a)(Object(u.a)({},n),{},{src:c,alt:e.alt_text||""}))):Object(o.jsx)(b,Object(u.a)(Object(u.a)({},e),{},{Icon:t}))}var b=function(e){var t=e.Icon,c=void 0===t?O:t,n=Object(d.a)(e,["Icon"]);return Object(o.jsx)("div",Object(u.a)(Object(u.a)({},n),{},{className:Object(i.d)(["img-placeholder",n.className]),children:Object(o.jsx)(c,{className:"icon"})}))},O=function(e){return Object(o.jsxs)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},e),{},{children:[Object(o.jsx)("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"}),Object(o.jsx)("path",{d:"M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"})]}))},h=c(21),f=function(e){var t=e.Icon,c=e.label,n=Object(d.a)(e,["Icon","label"]),a=n.maxSize,r=Object(d.a)(n,["maxSize"]);return t?Object(o.jsxs)("button",Object(u.a)(Object(u.a)({title:c,type:"button"},r),{},{className:Object(i.d)(["btn btn-icon",n.className]),children:[Object(o.jsx)(t,{className:"icon",height:a,width:a}),c&&Object(o.jsx)("span",{className:"label",children:c})]})):null},x=function(e){var t=e.Icon,c=e.label,n=Object(d.a)(e,["Icon","label"]);return t&&n.to?Object(o.jsxs)(h.c,Object(u.a)(Object(u.a)({},n),{},{className:Object(i.d)(["btn btn-icon",n.className]),children:[Object(o.jsx)(t,{className:"icon"}),c&&Object(o.jsx)("span",{className:"label",children:c})]})):null}},16:function(e,t,c){"use strict";var n=c(2),a=c(18),r=c(20),s=c(14),i=c.n(s),o=c(4),l="".concat(o.a).concat("/grio/api/v1/");i.a.defaults.xsrfCookieName="csrftoken",i.a.defaults.xsrfHeaderName="X-CSRFTOKEN",i.a.defaults.headers.post["Content-Type"]="application/json";var u=i.a.create({baseURL:l,timeout:3e3,withCredentials:!0,headers:{"Content-type":"application/json"}}),d={get:function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;return new Promise((function(s,i){return n.get(e,{params:t}).then((function(e){var t=e.data;return Object(a.isString)(c)&&r.c.dispatch({type:c,payload:t}),s(t)})).catch((function(e){return i(e)}))}))},post:function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;return new Promise((function(s,i){n.post(e,t).then((function(e){var t=e.data;return Object(a.isString)(c)&&r.c.dispatch({type:c,payload:t}),s(t)})).catch((function(e){return i(e)}))}))},patch:function(e,t,c,s){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u;return new Promise((function(o,l){if(c&&Object(a.isEqual)(t,c))return o({isUpdated:!1});i.patch(e,t).then((function(e){var t=e.data;return Object(a.isString)(s)&&r.c.dispatch({type:s,payload:t}),o(Object(n.a)(Object(n.a)({},t),{},{isUpdated:!0}))})).catch((function(e){return l(e)}))}))},delete:function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;return new Promise((function(s,i){return n.delete(e).then((function(e){if(204===!e.status)return i(e);Object(a.isString)(c)&&r.c.dispatch({type:c,payload:{slug:t}}),s({deleted:!0})})).catch((function(e){return i(e)}))}))}};t.a=d},19:function(e,t,c){"use strict";c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return u}));var n=c(2),a=c(27),r=c(16);function s(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"slug",n=e.map((function(e){return e[c]}));return n.includes(t[c])?e.map((function(e){return e[c]===t[c]?t:e})):[t].concat(Object(a.a)(e))}var i="sections/",o={list:function(e){return r.a.get(i,e,"SET_SECTIONS")},get:function(e,t){return r.a.get("".concat(i).concat(e,"/"),t,"ADD_UPDATE_SECTION")},patch:function(e,t,c){return r.a.patch("".concat(i).concat(e,"/"),t,c,"ADD_UPDATE_SECTION")},delete:function(e){return r.a.delete("".concat(i).concat(e,"/"),e,"REMOVE_SECTION")}},l={sections:{results:[]}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.sections,t=arguments.length>1?arguments[1]:void 0,c=t.type,a=t.payload,r=void 0===a?{}:a,i=r.results;switch(c){case"SET_SECTIONS":return Object(n.a)({},r);case"ADD_UPDATE_SECTION":return i=s(e.results,r),Object(n.a)(Object(n.a)({},e),{},{results:i});case"REMOVE_SECTION":return i=e.results.filter((function(e){return e.slug!==r.slug})),Object(n.a)(Object(n.a)({},e),{},{results:i});default:return Object(n.a)({},e)}}},20:function(e,t,c){"use strict";c.d(t,"a",(function(){return k})),c.d(t,"c",(function(){return L})),c.d(t,"b",(function(){return U}));var n=c(27),a=c(2),r=c(52),s=c(0),i=c(6),o=c(17),l=c(28),u=(c(62),c(13)),d=c(4),j=c(1),b=Object(s.createContext)(),O=function(e){var t=e.children,c=Object(s.useState)({isLoaded:!1}),n=Object(u.a)(c,2),r=n[0],i=n[1],o=window.location.href;return Object(s.useEffect)((function(){Object(d.f)().then((function(e){i(Object(a.a)(Object(a.a)({},e),{},{isLoaded:!0}))})).catch((function(e){i({isLoaded:!1}),console.log(e)}))}),[o]),Object(j.jsx)(b.Provider,{value:r,children:t})},h=c(34),f=c(316),x=c(317),v=c(318),m=c(319),p=c(320),g=c(15),N=Object(s.lazy)((function(){return c.e(3).then(c.bind(null,326))})),E=Object(s.lazy)((function(){return c.e(4).then(c.bind(null,324))}));function y(e){var t=Object(s.useContext)(b),c=e.match.path;return t?t.isLoaded?Object(j.jsxs)("div",{id:"AdminView",children:[Object(j.jsx)(S,Object(a.a)(Object(a.a)({},e),{},{path:c,ctx:t})),Object(j.jsx)("main",{className:"grio-main",role:"main",children:Object(j.jsx)("section",{className:"container",children:Object(j.jsx)(s.Suspense,{fallback:Object(j.jsx)(k,{}),children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"".concat(c,"pages/"),component:N}),Object(j.jsx)(i.b,{path:"".concat(c,"settings/"),component:E}),Object(j.jsx)(i.b,{path:"".concat(c),component:w})]})})})}),Object(j.jsx)(C,{})]}):Object(j.jsx)(k,{}):null}var w=function(e){return Object(j.jsx)("div",{className:"",children:"Dashboard"})},S=function(e){var t=e.path,c=e.ctx,n=void 0===c?{}:c;return Object(j.jsxs)("nav",{id:"AdminNav",className:"grio-nav",children:[Object(j.jsx)("header",{className:"grio-nav-header",children:Object(j.jsx)("h1",{children:n.site.name})}),Object(j.jsxs)("section",{className:"grio-nav-body",children:[Object(j.jsxs)("div",{className:"grio-nav-content",children:[Object(j.jsx)(T,{exact:!0,to:"/grio/",label:"Dashboard",Icon:f.a}),Object(j.jsx)("div",{className:"grio-nav-items",children:Object(j.jsx)(T,{to:"".concat(t,"blog"),label:"Articles",Icon:x.a})}),Object(j.jsx)(T,{to:"".concat(t,"pages/"),label:"Pages",Icon:v.a}),Object(j.jsx)(T,{to:"".concat(t,"staff/"),label:"Staff",Icon:m.a})]}),Object(j.jsx)("div",{className:"grio-nav-footer",children:Object(j.jsx)(T,{to:"".concat(t,"settings/"),label:"Settings",Icon:p.a})})]})]})},T=function(e){return Object(j.jsx)("div",{className:"grio-nav-item",children:Object(j.jsx)(g.b,Object(a.a)(Object(a.a)({},e),{},{className:"grio-nav-link"}))})},C=function(e){return Object(j.jsx)("nav",{className:"grio-mobile-nav",children:"Mobile"})},I=c(32),D=c(19),P={pages:I.c,sections:D.b},_=Object(s.lazy)((function(){return Promise.resolve().then(c.bind(null,34))})),k=function(e){return Object(j.jsx)("div",{children:"Loading ..."})},A=Object(l.b)(Object(a.a)({},P)),R=[r.a],M=[l.a.apply(void 0,R)];d.b&&(M=[].concat(Object(n.a)(M),[window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}]));var L=Object(l.d)(A,{},l.c.apply(void 0,Object(n.a)(M)));function U(e){return Object(j.jsx)(O,{children:Object(j.jsx)(o.a,{store:L,children:Object(j.jsx)("div",{id:"Grio",children:Object(j.jsx)(s.Suspense,{fallback:Object(j.jsx)(k,{}),children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"".concat(h.EDITOR_PATH),component:_}),Object(j.jsx)(i.b,{component:y})]})})})})})}},305:function(e,t,c){},306:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(22),s=c.n(r),i=c(21),o=c(6),l=c(20),u=(c(305),function(e){e&&e instanceof Function&&c.e(5).then(c.bind(null,325)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))}),d=c(1);s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(o.d,{children:Object(d.jsx)(o.b,{path:"/grio/",component:l.b})})})}),document.getElementById("root")),u()},32:function(e,t,c){"use strict";c.d(t,"b",(function(){return l})),c.d(t,"c",(function(){return u})),c.d(t,"a",(function(){return d}));var n=c(23),a=c(2),r=c(7),s=c(16),i=c(34),o={results:[],items:{}},l={path:"pages/",list:function(e){return s.a.get(this.path,e,"SET_PAGES")},get:function(e,t){return s.a.get("".concat(this.path).concat(e,"/"),t,"ADD_UPDATE_PAGE")},patch:function(e,t,c){return s.a.patch("".concat(this.path).concat(e,"/"),t,c,"ADD_UPDATE_PAGE")},delete:function(e){return s.a.delete("".concat(this.path).concat(e,"/"),e,"REMOVE_PAGE")}},u=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,c=arguments.length>1?arguments[1]:void 0,s=c.type,i=c.payload,l=void 0===i?{}:i;switch(s){case"SET_PAGES":var u=l.results,d=Object(r.a)(l,["results"]);return t=Object(a.a)({},d),u&&(e={},u.forEach((function(t){e["".concat(t.slug)]=t})),t=Object(a.a)(Object(a.a)({},t),{},{items:e})),t;case"ADD_UPDATE_PAGE":return e=Object(a.a)(Object(a.a)({},t.items),{},Object(n.a)({},l.slug,l)),Object(a.a)(Object(a.a)({},t),{},{items:e});case"REMOVE_PAGE":return delete(e=t.items)[l.slug],Object(a.a)(Object(a.a)({},t),{},{items:e});default:return Object(a.a)({},t)}},d=function(e){return"".concat(i.PAGE_CREATE_PATH).concat(e,"/")}},33:function(e,t,c){"use strict";var n=c(2),a=c(7),r=(c(86),c(4)),s=c(1),i=(0,c(0).forwardRef)((function(e,t){var c=e.id,i=e.clearFocus,o=e.value,l=e.onChange,u=e.placeholder,d=void 0===u?"Start typing ...":u,j=Object(a.a)(e,["id","clearFocus","value","onChange","placeholder"]),b=e.style;return Object(s.jsxs)("div",{id:c,className:Object(r.d)(["textareax",i&&"clear-focus"]),children:[Object(s.jsx)("span",{className:"textareax-mirror",style:b,children:"".concat(o,"\n")}),Object(s.jsx)("div",{className:"textareax-input",children:Object(s.jsx)("textarea",Object(n.a)(Object(n.a)({},j),{},{value:o,onChange:l,placeholder:d,style:b,ref:t}))})]})}));t.a=i},34:function(e,t,c){"use strict";c.r(t),c.d(t,"EDITOR_PATH",(function(){return je})),c.d(t,"PAGE_CREATE_PATH",(function(){return be})),c.d(t,"default",(function(){return Oe}));var n=c(2),a=c(6),r=(c(84),c(0)),s=c(17),i=c(32),o=c(13),l=c(7),u=(c(85),c(3)),d=c.n(u),j=c(33),b=c(4),O=Object(r.createContext)(null),h=O.Provider,f=O,x=c(1),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.forwardRef)((function(c,a){c=Object(n.a)(Object(n.a)({},t),c);var s=Object(r.useContext)(f)||Object(b.g)("FormCtx"),i=c.name,o=void 0===i?Object(b.g)("name prop"):i,l=c,u=l.value,d=l.checked,j=l.onChange;return Object.keys(s.values).includes(o)&&("checkbox"===c.type?d=s.values[o]:u=s.values[o]),j=j||s.handleChange,Object(x.jsx)(e,Object(n.a)(Object(n.a)({},c),{},{className:Object(b.d)([t.className,c.className]),value:u,checked:d,onChange:j,ref:a}))}))},m=v("input",{className:"input"});m.propTypes={id:d.a.string,className:d.a.string,value:d.a.string,required:d.a.bool,disabled:d.a.bool};var p=v("input",{type:"checkbox",className:"input input-checkbox"});p.propTypes={id:d.a.string,className:d.a.string,value:d.a.any,checked:d.a.bool,required:d.a.bool,disabled:d.a.bool};var g=v("textarea",{className:"textarea"}),N=v(j.a);b.b&&(m.displayName="TextInput",p.displayName="CheckboxInput",g.displayName="TextArea",N.displayName="TextAreaX");var E=c(23);function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(Object(n.a)({},e)),c=Object(o.a)(t,2),a=c[0],s=c[1],i=Object(r.useState)({}),l=Object(o.a)(i,2),u=l[0],d=l[1],j=function(e,t){s(Object(n.a)(Object(n.a)({},a),{},Object(E.a)({},e,t)))},b=function(e){var t=e.target.name;return j(t,!a[t])},O=function(e){switch(e.target.type){case"checkbox":return b(e);default:return j(e.target.name,e.target.value)}};return{values:a,handleChange:O,toggleCheck:b,setValue:j,setValues:s,errors:u,setErrors:d}}var w=Object(r.forwardRef)((function(e,t){var c=e.children,a=e.context,r=Object(l.a)(e,["children","context"]);return Object(x.jsx)(h,{value:a,children:Object(x.jsx)("form",Object(n.a)(Object(n.a)({},r),{},{ref:t,children:c}))})}));w.TextInput=m,w.CheckboxInput=p,w.TextArea=g,w.TextAreaX=N;var S=w,T=(c(87),c(311)),C=c(312),I=c(15),D=c(307),P=c(308),_=c(309),k=c(310),A=function(e){var t=e.context,c=void 0===t?Object(b.g)("section context"):t,n=e.form,a=void 0===n?Object(b.g)("form context"):n,r=e.data,s=void 0===r?Object(b.g)("section data"):r;return Object(x.jsx)(I.a,{Icon:D.a,label:"Save",className:"section-btn",title:"Save",onClick:function(t){var n=s.text!==a.values.text;if(console.log("Saving",n),!n)return c.setEdit(!c.isEdit);e.onSave&&e.onSave()}})},R=function(e){console.log(e);var t=e.context,c=void 0===t?Object(b.g)("section context"):t,a=e.data,r=void 0===a?Object(b.g)("section data"):a;return Object(x.jsx)(I.a,Object(n.a)(Object(n.a)({},e),{},{Icon:P.a,className:"section-btn btn-danger",title:"Delete",onClick:function(){return c.remove(r.slug)}}))},M=function(e){var t=e.context,c=void 0===t?Object(b.g)("section context"):t,a=c.isEdit;return a?Object(x.jsx)(A,Object(n.a)({},e)):Object(x.jsx)(I.a,{Icon:a?_.a:k.a,className:"section-btn",title:a?"Preview Mode":"Edit Mode",onClick:function(){return c.setEdit(!a)}})},L=function(e){var t=e.children,c=e.id,n=e.className;return Object(x.jsx)("div",{id:c,className:Object(b.d)(["section-body",n]),children:t})},U=function(e){var t=e.children,c=e.Icon,n=e.id,a=e.className;return Object(x.jsxs)("div",{id:n,className:Object(b.d)(["section-header",a]),children:[c&&Object(x.jsx)("div",{className:"",children:Object(x.jsx)(c,{className:"icon"})}),t]})},F=function(e){var t=e.children,c=e.id,n=e.className;return Object(x.jsx)("div",{id:c,className:Object(b.d)(["section-footer",n]),children:t})},G=function(e){var t=e.children;return Object(x.jsx)("div",{className:"",onClick:function(){return console.log("Uploading...")},children:t})},X=function(e){var t=e.tab;return"library"===t?Object(x.jsx)(H,Object(n.a)({},e)):"unsplash"===t?Object(x.jsx)(V,Object(n.a)({},e)):Object(x.jsxs)("div",{className:"tab-upload",children:[Object(x.jsx)("div",{className:"",children:"Click to upload an image"}),Object(x.jsx)("div",{className:"",children:"or"}),Object(x.jsx)("div",{className:"",children:"Paste url"})]})},H=function(e){return Object(x.jsx)("div",{className:"tab-library",children:"Images from library"})},V=function(e){return Object(x.jsx)("div",{className:"tab-unsplash",children:"Images from unsplash"})},z=function(e){var t=Object(r.useState)("new"),c=Object(o.a)(t,2),n=c[0],a=c[1];return Object(x.jsxs)("div",{className:"section-edit",children:[Object(x.jsxs)("div",{className:"",children:[Object(x.jsx)("button",{onClick:function(){return a("new")},children:"New"}),Object(x.jsx)("button",{onClick:function(){return a("library")},children:"Library"}),Object(x.jsx)("button",{onClick:function(){return a("unsplash")},children:"Unsplash"})]}),Object(x.jsx)(X,{tab:n}),Object(x.jsx)(G,{})]})},q=function(e){var t=e.data;if(e.context.isEdit)return Object(x.jsx)(z,Object(n.a)({},e));return Object(x.jsxs)("div",{className:Object(b.d)(["section-preview",!t.image&&"empty"]),onClick:function(){return e.context.setEdit(!e.context.isEdit)},children:[Object(x.jsx)(I.c,{Icon:T.a,src:"https://images.unsplash.com/photo-1621570070821-2e2b1358fae3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxMTc3M3wxfDF8YWxsfDF8fHx8fHwyfHwxNjIxOTkyNDMw&ixlib=rb-1.2.1&q=80&w=2000"}),!t.image&&Object(x.jsx)("span",{children:"Click to upload an image"})]})},B=Object(r.forwardRef)((function(e,t){return Object(x.jsxs)("div",{id:e.id,ref:t,className:Object(b.d)([e.className,"section-img"]),children:[Object(x.jsx)(U,{Icon:C.a}),Object(x.jsx)(L,{children:Object(x.jsx)(q,Object(n.a)({},e))}),Object(x.jsx)(F,{children:Object(x.jsx)("div",{className:"actions",children:Object(x.jsx)(R,Object(n.a)({},e))})})]})}));b.b&&(B.displayName="ImageSection");var J=B,W=(c(92),c(313)),K=c(36),Y=c.n(K);c(54);Y.a.setOptions({renderer:new Y.a.Renderer,highlight:function(e,t){var n=c(94),a=n.getLanguage(t)?t:"plaintext";return n.highlight(e,{language:a}).value},pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});function Q(e){var t=e.type;switch(void 0===t?Object(b.g)("section type"):t){case"MD":return Y()(e.text);default:return"<div>".concat(e.text,"</div>")}}var Z=function(e){return Object(x.jsx)("div",{className:"",children:Object(x.jsx)(S.TextAreaX,{autoFocus:!0,clearFocus:!0,name:"text",placeholder:"# Mardown is supported ..."})})},$=function(e){return e.context.isEdit?Object(x.jsx)(Z,Object(n.a)({},e)):Object(x.jsx)("div",{className:"",children:Object(x.jsx)("div",{dangerouslySetInnerHTML:{__html:e.data.html||"Nothing to preview"}})})},ee=Object(r.forwardRef)((function(e,t){var c=y({text:e.data.text||""}),a=e.data,r=e.context.update;return Object(x.jsx)(h,{value:c,children:Object(x.jsxs)("div",{id:e.id,ref:t,className:Object(b.d)([e.className,"section-md"]),children:[Object(x.jsx)(U,{Icon:W.a}),Object(x.jsx)(L,{children:Object(x.jsx)($,Object(n.a)({},e))}),Object(x.jsx)(F,{children:Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsx)(R,Object(n.a)(Object(n.a)({},e),{},{label:"Delete"})),Object(x.jsx)("div",{className:"actions-primary",children:Object(x.jsx)(M,{context:e.context,form:c,data:e.data,onSave:function(){if(a){var t=a.type;r(e.data.slug,{type:t,text:c.values.text,html:Q(Object(n.a)(Object(n.a)({},c.values),{},{type:t}))},{type:t,text:a.text}).then((function(t){e.context.setEdit(!1)}))}}})})]})})]})})}));b.b&&(ee.displayName="MarkdownSection");var te=ee,ce=c(314),ne=function(e){return Object(x.jsx)("div",{className:"",children:"TxtSectionEdit"})},ae=function(e){return e.context.isEdit?Object(x.jsx)(ne,Object(n.a)({},e)):Object(x.jsx)("div",{className:"",children:"Prev"})},re=Object(r.forwardRef)((function(e,t){return Object(x.jsxs)("div",{id:e.id,ref:t,className:Object(b.d)([e.className]),children:[Object(x.jsx)(U,{Icon:ce.a}),Object(x.jsx)(L,{children:Object(x.jsx)(ae,Object(n.a)({},e))}),Object(x.jsx)(F,{children:Object(x.jsxs)("div",{className:"actions",children:[Object(x.jsx)(R,Object(n.a)(Object(n.a)({},e),{},{label:"Delete"})),Object(x.jsx)(M,{context:e.context})]})})]})}));b.b&&(re.displayName="TextSection");var se=re,ie=c(19),oe=Object(r.createContext)();function le(e){var t=e.data,c=void 0===t?Object(b.g)("section data props"):t,a=c.slug,i=c.type,l=Object(r.useRef)(),u=Object(r.useState)(e.isEdit||!1),d=Object(o.a)(u,2),j=d[0],O=d[1],h=Object(s.b)(),f=Object(r.useMemo)((function(){return{isEdit:j,setEdit:O,update:ie.a.patch,remove:ie.a.delete,dispatch:h}}),[j,h]);if(!a)return null;var v=function(e){switch(e){case"MD":return te;case"IMG":return J;default:return se}}(i);return Object(x.jsx)(oe.Provider,{value:f,children:Object(x.jsx)(v,Object(n.a)({},Object(n.a)(Object(n.a)({},e),{},{ref:l,context:f,className:Object(b.d)(["section",j&&"active"])})))})}function ue(e){var t=e.sourceSlug,c=void 0===t?Object(b.g)("source slug"):t,n=e.children,a=Object(l.a)(e,["sourceSlug","children"]),s=Object(r.useState)(1),i=Object(o.a)(s,2),u=i[0],d=i[1],j=a.sourceData,O=void 0===j?Object(b.g)("source data"):j;Object(r.useEffect)((function(){c&&ie.a.list({source:c}).then((function(){d(0)}))}),[c]);var h=y({label:O.label||""});return u?Object(x.jsx)("div",{children:"Loading ..."}):Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(S,{context:h,onSubmit:function(e){return e.preventDefault()},children:n})})}ue.Panel=function(e){var t=Object(s.c)((function(e){return e.sections}));return t?Object(x.jsx)("div",{className:"editor-panel",children:Object(x.jsxs)("div",{className:"editor-content",children:[Object(x.jsx)("div",{className:"editor-label",children:Object(x.jsx)(S.TextAreaX,{name:"label",tabIndex:1,maxLength:250})}),Object(x.jsx)("div",{className:"editor-sections",children:t.results.map((function(e){return Object(x.jsx)(le,{data:e},e.slug)}))})]})}):null};var de=c(315),je="/grio/editor/",be="".concat(je,"pages/");function Oe(e){var t=e.match.path;return Object(x.jsx)("div",{className:"editor",children:Object(x.jsxs)(a.d,{children:[Object(x.jsx)(a.b,{path:"".concat(t,"pages/:pageSlug/"),component:fe}),Object(x.jsx)(a.b,{path:"".concat(t,"pages/"),component:he}),Object(x.jsx)(a.a,{to:be})]})})}var he=function(e){return Object(x.jsx)("div",{className:"view",children:"page add"})},fe=function(e){var t=e.match.params.pageSlug,c=Object(s.b)();Object(r.useEffect)((function(){t&&i.b.get(t).catch((function(e){}))}),[t]);var a=Object(s.c)((function(e){return e.pages.items}))["".concat(t)];return a?Object(x.jsx)(ue,{sourceSlug:t,sourceData:a,children:Object(x.jsx)("div",{className:"view",children:Object(x.jsxs)("section",{className:"view-content",children:[Object(x.jsx)(xe,Object(n.a)(Object(n.a)({},e),{},{pageSlug:t,dispatch:c,page:a})),Object(x.jsx)(ue.Panel,{})]})})}):null},xe=function(e){return Object(x.jsx)("header",{className:"view-header",children:Object(x.jsx)(I.b,{label:"Pages",Icon:de.a,to:"/grio/pages/"})})}},4:function(e,t,c){"use strict";c.d(t,"b",(function(){return o})),c.d(t,"a",(function(){return l})),c.d(t,"f",(function(){return d})),c.d(t,"d",(function(){return j})),c.d(t,"e",(function(){return b})),c.d(t,"c",(function(){return O})),c.d(t,"g",(function(){return h}));var n=c(39),a=c.n(n),r=c(53),s=(c(2),c(14)),i=c.n(s),o=(c(18),!1),l=o?"http://127.0.0.1:8000":"".concat(window.location.origin);i.a.defaults.xsrfCookieName="csrftoken",i.a.defaults.xsrfHeaderName="X-CSRFTOKEN",i.a.defaults.headers["Content-Type"]="text/html; charset=UTF-8",i.a.defaults.headers.post["Content-Type"]="application/json";var u=i.a.create({baseURL:l,timeout:3e3,withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"},onUploadProgress:function(e){}}),d=function(){return new Promise(function(){var e=Object(r.a)(a.a.mark((function e(t,c){var n,r,s,i,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=document.getElementById("sharedData"))||!o){e.next=17;break}return console.log("Getting page shared data in ".concat("production"," mode")),r=new URL(window.location.href),s="".concat(r.pathname).concat(r.search),e.prev=5,e.next=8,u.get(s);case 8:i=e.sent,e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(5),e.abrupt("return",c(e.t0));case 14:if(i&&200===i.status){e.next=16;break}return e.abrupt("return",c("No data"));case 16:i.headers["content-type"].includes("text")&&(l=new DOMParser,d=l.parseFromString(i.data,"text/html"),n=d.getElementById("sharedData"));case 17:if(!n){e.next=19;break}return e.abrupt("return",t(JSON.parse(n.textContent)));case 19:return e.abrupt("return",t({}));case 20:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t,c){return e.apply(this,arguments)}}())},j=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)&&(e=t.map((function(e){return e&&"".concat(e)})).filter(Boolean).join(" ")),e},b=function(e){if(o&&e){var t=new URL(l);e.includes("http")||(e="".concat(t.origin).concat(e))}return e},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h("string param");return e.endsWith("/")?e:"".concat(e,"/")},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Param";throw new Error("".concat(e," is required"))}},62:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},90:function(e,t,c){}},[[306,1,2]]]);
//# sourceMappingURL=main.73f84fac.chunk.js.map