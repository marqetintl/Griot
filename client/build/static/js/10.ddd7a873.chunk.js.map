{"version":3,"sources":["../../../../../packages/miq-hrmjs/src/company/utils.jsx","../../../../../packages/miq-hrmjs/src/company/UpdateView.jsx","../../../../../packages/miq-hrmjs/src/index.jsx"],"names":["StaffService","CompanyEditForm","company","name","form","useForm","context","onSubmit","e","preventDefault","className","Label","value","TextInput","Submit","CompanyUpdateView","props","useContext","SharedDataCtx","slug","console","log","Section","title","text","EmployeeRoutes","lazy","DepartmentRoutes","AdminNavLinks","url","addForwardSlash","match","exact","to","label","requiredPerms","HrmRoutes","path","actions","component","CompanyCreateView"],"mappings":"2QAE+B,IAAIA,IAAa,c,oBCc1CC,EAAkB,SAAC,GAA0C,IAAD,IAAvCC,eAAuC,MAA7B,CAAEC,KAAM,IAAqB,EAC1DC,GAD0D,iBACnDC,YAAQ,CAAEF,KAAMD,EAAQC,QAerC,OACE,eAAC,IAAD,CAAMG,QAASF,EAAMG,SAdH,SAACC,GACnBA,EAAEC,kBAaF,UACE,sBAAKC,UAAU,cAAf,UACE,cAAC,IAAKC,MAAN,CAAYC,MAAM,eAAeF,UAAU,iBAC3C,cAAC,IAAKG,UAAN,CAAgBV,KAAK,YAGvB,qBAAKO,UAAU,GAAf,SACE,cAAC,IAAKI,OAAN,CAAaF,MAAM,OAAOF,UAAU,0BAM7B,SAASK,EAAkBC,GACxC,IAAQd,EAAYe,qBAAWC,KAAvBhB,QAER,OAAKA,GAAYA,EAAQiB,MAEzBC,QAAQC,IAAInB,GAGV,eAAC,IAAD,WACE,cAAC,IAAUoB,QAAX,CAAmBC,MAAM,kBAAkBC,KAAK,iCAAhD,SACE,cAAC,EAAD,2BAAqBR,GAArB,IAA4Bd,QAASA,OAGvC,cAAC,IAAUoB,QAAX,CAAmBC,MAAM,eAAzB,SACE,qBAAKb,UAAU,qBAAf,oDAXgC,K,kBCrClCe,EAAiBC,gBAAK,kBAAM,kCAC5BC,EAAmBD,gBAAK,kBAAM,kCAE9BE,EAAgB,SAAC,GAAgC,IAAD,IAA7B1B,eAA6B,MAAnB,GAAmB,EAAZc,EAAY,iBAC9Ca,EAAMC,YAAgBd,EAAMe,MAAMF,KACxC,OACE,sBAAKnB,UAAU,SAAf,UACE,cAAC,IAAD,CACEsB,OAAK,EACLC,GAAIJ,EACJK,MAAM,UACNC,cAAe,CAAC,0BAChBzB,UAAU,yBAEZ,cAAC,IAAD,CACEuB,GAAE,UAAKJ,GAAL,OAAW3B,EAAQiB,KAAnB,eACFe,MAAM,YACNC,cAAe,CAAC,yBAChBzB,UAAU,yBAEZ,cAAC,IAAD,CACEuB,GAAE,UAAKJ,GAAL,OAAW3B,EAAQiB,KAAnB,iBACFe,MAAM,cACNC,cAAe,CAAC,2BAChBzB,UAAU,wBAMH,SAAS0B,EAAUpB,GAChC,IAAQqB,EAASrB,EAAMe,MAAfM,KACAnC,EAAYe,qBAAWC,KAAvBhB,QAER,OAAKA,EAKH,cAAC,IAAD,CACEqB,MAAO,oBAAIb,UAAU,4BAAd,SAA2CR,EAAQC,OAC1DmC,QAAS,cAAC,EAAD,2BAAmBtB,GAAnB,IAAgCd,aACzCQ,UAAU,aAHZ,SAKE,eAAC,IAAD,WACE,cAAC,IAAD,CACE2B,KAAI,UAAKA,EAAL,wBACJE,UAAWd,EACXU,cAAe,CAAC,2BAElB,cAAC,IAAD,CACEE,KAAI,UAAKA,EAAL,0BACJE,UAAWZ,EACXQ,cAAe,CAAC,6BAElB,cAAC,IAAD,CAAYE,KAAMA,EAAME,UAAWxB,EAAmBoB,cAAe,CAAC,iCApBnE,cAACK,kBAAD,eAAuBxB","file":"static/js/10.ddd7a873.chunk.js","sourcesContent":["import { StaffService } from '@miq/adminjs';\n\nexport const companyServices = new StaffService('companies/');\n","import { useContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Form, { useForm } from '@miq/form';\nimport { AdminView } from '@miq/adminjs';\nimport { SharedDataCtx } from '@miq/contexts';\n\nimport { companyServices } from './utils';\n// import { EmployeeFirstnameInput, EmployeeLastNameInput, EmployeeEmailInput } from './inputs';\n\nconst propTypes = {\n  company: PropTypes.shape({\n    slug: PropTypes.string.isRequired,\n  }),\n};\n\nconst CompanyEditForm = ({ company = { name: '' }, ...props }) => {\n  const form = useForm({ name: company.name });\n\n  const saveCompany = (e) => {\n    e.preventDefault();\n    // employeeServices\n    //   .post({ ...form.values, company: props.compSlug })\n    //   .then(({ slug }) => {\n    //     if (!slug) return;\n\n    //     const url = props.match.url.replace('new', slug);\n    //     props.history.push(url);\n    //   })\n    //   .catch((err) => form.handleError(err, true));\n  };\n\n  return (\n    <Form context={form} onSubmit={saveCompany}>\n      <div className=\"d-grid mb-2\">\n        <Form.Label value=\"Company name\" className=\"d-block mb-1\" />\n        <Form.TextInput name=\"name\" />\n      </div>\n\n      <div className=\"\">\n        <Form.Submit value=\"Save\" className=\"btn btn-primary\" />\n      </div>\n    </Form>\n  );\n};\n\nexport default function CompanyUpdateView(props) {\n  const { company } = useContext(SharedDataCtx);\n\n  if (!company || !company.slug) return null;\n\n  console.log(company);\n\n  return (\n    <AdminView>\n      <AdminView.Section title=\"Company profile\" text=\"Update company profile details\">\n        <CompanyEditForm {...props} company={company} />\n      </AdminView.Section>\n\n      <AdminView.Section title=\"Segmentation\">\n        <div className=\"text-muted text-sm\">All Users | % Male/Female/Others</div>\n      </AdminView.Section>\n    </AdminView>\n  );\n}\n\nCompanyUpdateView.propTypes = propTypes;\n","import { lazy, Suspense, useContext, useState } from 'react';\nimport { Switch } from 'react-router-dom';\n\nimport { SharedDataCtx } from '@miq/contexts';\nimport { Loading } from '@miq/components';\n\nimport { addForwardSlash } from '@miq/utils';\nimport { AdminRoute, AdminView, AdminNavLink } from '@miq/adminjs';\n\nimport './index.scss';\nimport CompanyUpdateView from './company/UpdateView';\n\nconst EmployeeRoutes = lazy(() => import('./employee'));\nconst DepartmentRoutes = lazy(() => import('./department'));\n\nconst AdminNavLinks = ({ company = {}, ...props }) => {\n  const url = addForwardSlash(props.match.url);\n  return (\n    <div className=\"d-flex\">\n      <AdminNavLink\n        exact\n        to={url}\n        label=\"Profile\"\n        requiredPerms={['miq_hrm.change_company']}\n        className=\"btn-secondary-2 me-1\"\n      />\n      <AdminNavLink\n        to={`${url}${company.slug}/employees/`}\n        label=\"Employees\"\n        requiredPerms={['miq_hrm.view_employee']}\n        className=\"btn-secondary-2 me-1\"\n      />\n      <AdminNavLink\n        to={`${url}${company.slug}/departments/`}\n        label=\"Departments\"\n        requiredPerms={['miq_hrm.view_department']}\n        className=\"btn-secondary-2\"\n      />\n    </div>\n  );\n};\n\nexport default function HrmRoutes(props) {\n  const { path } = props.match;\n  const { company } = useContext(SharedDataCtx);\n\n  if (!company) {\n    return <CompanyCreateView {...props} />;\n  }\n\n  return (\n    <AdminView\n      title={<h2 className=\"text-md d-none d-md-block\">{company.name}</h2>}\n      actions={<AdminNavLinks {...props} {...{ company }} />}\n      className=\"hrm-routes\"\n    >\n      <Switch>\n        <AdminRoute\n          path={`${path}:compSlug/employees/`}\n          component={EmployeeRoutes}\n          requiredPerms={['miq_hrm.view_employee']}\n        />\n        <AdminRoute\n          path={`${path}:compSlug/departments/`}\n          component={DepartmentRoutes}\n          requiredPerms={['miq_hrm.view_department']}\n        />\n        <AdminRoute path={path} component={CompanyUpdateView} requiredPerms={['miq_hrm.change_company']} />\n      </Switch>\n    </AdminView>\n  );\n}\n\n/**\n * COMPANY\n */\n"],"sourceRoot":""}