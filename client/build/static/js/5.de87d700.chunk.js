(this["webpackJsonp@grio/client"]=this["webpackJsonp@grio/client"]||[]).push([[5],{124:function(e,t,c){},127:function(e,t){},340:function(e,t){},341:function(e,t){},342:function(e,t){},343:function(e,t){},344:function(e,t){},346:function(e,t,c){},352:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return v}));var n=c(4),r=c(16),s=c(5),i=c(2),a=c(3),u=c(1),o=c(10),l=c(350),j=(c(346),c(0)),d=["src","children"],b=Object(i.createContext)();function f(e){var t=e.src,c=e.children,s=(Object(n.a)(e,d),Object(i.useState)(null)),a=Object(r.a)(s,2),u=a[0],o=a[1],l=Object(i.useState)(1),f=Object(r.a)(l,2),m=f[0],O=f[1],h=Object(i.useMemo)((function(){function e(e){O((function(t){return t+e}))}return{src:t,numPages:u,pageNumber:m,previousPage:function(){e(-1)},nextPage:function(){e(1)},setNumPages:o,setPageNumber:O}}),[t,u,m]);return Object(j.jsx)(b.Provider,{value:h,children:c})}l.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(l.c.version,"/pdf.worker.js");f.Previous=function(e){var t=Object(i.useContext)(b),c=t.pageNumber,n=t.previousPage;return Object(j.jsx)(o.c,{id:e.id,className:e.className,disabled:c<=1,onClick:n,children:"Previous"})},f.Next=function(e){var t=Object(i.useContext)(b),c=t.pageNumber,n=t.numPages,r=t.nextPage;return Object(j.jsx)(o.c,{id:e.id,className:e.className,disabled:c>=n,onClick:r,children:"Next"})},f.Renderer=function(e){var t=Object(i.useContext)(b),c=t.src,n=t.pageNumber,r=t.setNumPages,s=t.setPageNumber;if(!c)return null;return c=Object(a.g)(c),Object(j.jsx)("div",{id:e.id,className:Object(a.f)(["miq-pdf",e.className]),children:Object(j.jsx)(l.a,{file:c,onLoadSuccess:function(e){var t=e.numPages;r(t),s(n)},children:Object(j.jsx)(l.b,{pageNumber:n})})})};c(124);var m=["items"],O=function(e){switch(e.ext){case".jpg":case".jpeg":case".png":return Object(j.jsx)(o.k,Object(u.a)({},e));default:var t=o.i.getFileIcon(e.ext);return Object(j.jsx)(t,{className:"icon mb-1"})}};function h(e){var t=e.items,c=void 0===t?[]:t;Object(n.a)(e,m);return Object(j.jsx)("div",{className:"docufile-grid d-grid grid-2 grid-sm-3 grid-md-4 grid-xl-5",children:c.map((function(e){var t=".jpg"===e.ext||".jpeg"===e.ext||".png"===e.ext;return Object(j.jsx)(f,{src:e.src,children:Object(j.jsxs)(o.e,{fullscreen:!0,title:e.name,className:"docufile-btn",renderHeader:function(t){return function(e){var t=e.setOpen,c=e.file;return Object(j.jsxs)("div",{className:"flex-1 d-flex justify-content-between",children:[Object(j.jsx)("div",{className:"",style:{overflowX:"scroll"},children:c.name_truncated}),Object(j.jsxs)("div",{className:"flex-1",children:[Object(j.jsx)(o.c,{className:"me-1",children:"Delete"}),Object(j.jsx)(o.c,{onClick:function(){return t(!1)},children:"Close"})]})]})}(Object(u.a)(Object(u.a)({},t),{},{file:e}))},render:function(c){return function(e){var t=e.file,c=e.isImg;return Object(j.jsxs)("div",{className:"miq-container",style:{minHeight:500},children:[c&&Object(j.jsx)(o.j,Object(u.a)({},t)),".pdf"===t.ext&&Object(j.jsx)(f.Renderer,{})]})}(Object(u.a)(Object(u.a)({},c),{},{file:e,isImg:t}))},renderFooter:function(t){return".pdf"!==Object(u.a)(Object(u.a)({},t),{},{file:e}).file.ext?null:Object(j.jsxs)("div",{className:"flex-1 miq-container d-flex align-items-center justify-content-between",children:[Object(j.jsx)("div",{children:Object(j.jsx)(f.Previous,{})}),Object(j.jsx)("div",{children:Object(j.jsx)(f.Next,{})})]})},children:[O(e),Object(j.jsxs)("div",{className:"text-center",children:[Object(j.jsx)("span",{className:"label d-block",children:e.name_truncated}),Object(j.jsx)("span",{className:"size d-block",children:e.size})]})]})},e.slug)}))})}var x=c(95),p=["user"];function v(e){var t=e.match.params.docSlug,c=Object(i.useState)(null),n=Object(r.a)(c,2),u=n[0],o=n[1],l=Object(i.useState)(null),d=Object(r.a)(l,2),b=(d[0],d[1]);return Object(i.useEffect)((function(){x.a.get(t).then((function(e){o(e)})).catch((function(e){return b("Error")}))}),[]),u?Object(j.jsxs)(s.g,{id:"DocumentReadOnlyView",className:"document-readonly-view",title:u.title,actions:Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"miq-user-avatar-group",children:[Object(j.jsx)("div",{className:"miq-user-avatar count",children:"+6"}),u.users_data.map((function(e){return Object(j.jsx)(g,{user:e},e.slug)}))]})}),children:[Object(j.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[Object(j.jsxs)("div",{className:"",children:["Reference ",Object(j.jsx)("span",{style:{fontWeight:"600"},children:u.reference})]}),Object(j.jsx)("div",{className:"text-muted fs-sm",children:Object(a.e)(u.created,{month:"long",day:"numeric",year:"numeric"},"fr")})]}),Object(j.jsx)("div",{className:"mb-4",children:u.description}),Object(j.jsx)(h,{items:u.files_data}),Object(j.jsx)("div",{className:"",children:"Voir les commentaires"})]}):null}var g=function(e){var t=e.user;Object(n.a)(e,p);return t?Object(j.jsx)("div",{className:"miq-user-avatar",children:t.initials}):null}},95:function(e,t,c){"use strict";c.d(t,"b",(function(){return s})),c.d(t,"c",(function(){return i})),c.d(t,"a",(function(){return a}));c(1);var n=c(5),r=c(3),s=function(e){return Object(r.e)(e,{month:"numeric",day:"numeric",year:"numeric"})},i=function(e,t){var c="".concat(t).concat(e.slug,"/");return e.is_read_only?"".concat(c,"view/"):c},a={path:"documents/",list:function(e){return Object(r.h)(n.a,this.path,e)},listPage:function(e){return Object(r.h)(n.a,e)},get:function(e,t){return Object(r.h)(n.a,"".concat(this.path).concat(e,"/"),t)},post:function(e){return n.k.post("".concat(this.path),e)},patch:function(e,t,c){return n.k.patch("".concat(this.path).concat(e,"/"),t,c)},archive:function(e){return n.k.get("".concat(this.path).concat(e,"/archive/"))},delete:function(e){return n.k.delete("".concat(this.path).concat(e,"/"))},patchFile:function(e,t){return Object.keys(t).includes("action")?n.k.post("".concat(this.path).concat(e,"/files/"),t):Promise.reject("Action required")},patchUserPermission:function(e,t,c){return n.k.post("".concat(this.path).concat(e,"/permission/"),{user_slug:t,permission:c})},getStaffList:function(e){return n.k.get("search-staff/",{q:e})},patchUser:function(e,t){return Object.keys(t).includes("action")?n.k.post("".concat(this.path).concat(e,"/users/"),t):Promise.reject("Action required")}}}}]);
//# sourceMappingURL=5.de87d700.chunk.js.map