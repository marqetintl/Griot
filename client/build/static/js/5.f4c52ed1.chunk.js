(this["webpackJsonp@grio/client"]=this["webpackJsonp@grio/client"]||[]).push([[5],{109:function(e,c,t){"use strict";t.r(c),t.d(c,"default",(function(){return v}));var n=t(1),s=t(11),a=t(2),r=t(6),i=t(5),u=t(3),l=t(4),o=t(368),j=(t(164),t(0)),d=["src","children"],b=Object(a.createContext)();function m(e){var c=e.src,t=e.children,n=(Object(l.a)(e,d),Object(a.useState)(null)),r=Object(s.a)(n,2),i=r[0],u=r[1],o=Object(a.useState)(1),m=Object(s.a)(o,2),O=m[0],f=m[1],x=Object(a.useMemo)((function(){function e(e){f((function(c){return c+e}))}return{src:c,numPages:i,pageNumber:O,previousPage:function(){e(-1)},nextPage:function(){e(1)},setNumPages:u,setPageNumber:f}}),[c,i,O]);return Object(j.jsx)(b.Provider,{value:x,children:t})}o.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(o.c.version,"/pdf.worker.js");m.Previous=function(e){var c=Object(a.useContext)(b),t=c.pageNumber,n=c.previousPage;return Object(j.jsx)(i.d,{id:e.id,className:e.className,disabled:t<=1,onClick:n,children:"Previous"})},m.Next=function(e){var c=Object(a.useContext)(b),t=c.pageNumber,n=c.numPages,s=c.nextPage;return Object(j.jsx)(i.d,{id:e.id,className:e.className,disabled:t>=n,onClick:s,children:"Next"})},m.Renderer=function(e){var c=Object(a.useContext)(b),t=c.src,n=c.pageNumber,s=c.setNumPages,r=c.setPageNumber;if(!t)return null;return t=Object(u.i)(t),Object(j.jsx)("div",{id:e.id,className:Object(u.h)(["miq-pdf",e.className]),children:Object(j.jsx)(o.a,{file:t,onLoadSuccess:function(e){var c=e.numPages;s(c),r(n)},children:Object(j.jsx)(o.b,{pageNumber:n})})})};t(142);var O=["items"],f=function(e){switch(e.ext){case".jpg":case".jpeg":case".png":return Object(j.jsx)(i.l,Object(n.a)({},e));default:var c=i.j.getFileIcon(e.ext);return Object(j.jsx)(c,{className:"icon mb-1"})}};function x(e){var c=e.items,t=void 0===c?[]:c;Object(l.a)(e,O);return Object(j.jsx)("div",{className:"docufile-grid d-grid grid-2 grid-sm-3 grid-md-4 grid-xl-5",children:t.map((function(e){return Object(j.jsxs)("a",{href:Object(u.i)(e.src),className:"docufile-btn",target:"_blank",children:[f(e),Object(j.jsxs)("div",{className:"text-center",children:[Object(j.jsx)("span",{className:"label d-block",children:e.name_truncated}),Object(j.jsx)("span",{className:"size d-block",children:e.size})]})]},e.slug)}))})}var p=t(19),h=t(114),g=(t(165),t(30));function v(e){var c=e.match.params.docSlug,t=Object(a.useState)(null),l=Object(s.a)(t,2),o=l[0],d=l[1],b=Object(a.useState)(null),m=Object(s.a)(b,2)[1];return Object(a.useEffect)((function(){p.a.detail(c).then((function(e){d(e)})).catch((function(e){return m("Error")}))}),[]),o&&o.slug?Object(j.jsxs)(r.g,{id:"DocumentReadOnlyView",className:"document-readonly-view",title:Object(j.jsx)(h.a,{}),actions:Object(j.jsx)(g.b,Object(n.a)(Object(n.a)({},e),{},{document:o,onSuccess:function(e){return d(Object(n.a)(Object(n.a)({},o),e))},className:"btn-primary-3"})),children:[Object(j.jsxs)(r.g.Section,{title:o.title,text:Object(u.g)(o.created,{month:"long",day:"numeric",year:"numeric"},"fr"),actions:Object(j.jsx)(i.b,{users:Object(p.e)(o),count:o.users_data.length}),children:[o.reference&&Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{className:"fw-bold me-1",children:"Reference:"}),Object(j.jsx)("span",{className:"reference",children:o.reference})]}),o.approved_by&&Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{className:"fw-bold me-1",children:"Approv\xe9 par:"}),Object(j.jsx)("span",{className:"approver",children:o.approved_by.name})]}),o.archived_by&&Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{className:"fw-bold me-1",children:"Archiv\xe9 par:"}),Object(j.jsx)("span",{className:"archiver",children:o.archived_by.name})]}),o.description&&Object(j.jsx)("div",{className:"description mt-3",children:o.description})]}),Boolean(o.files_data.length)&&Object(j.jsx)(r.g.Section,{title:"Fichiers",children:Object(j.jsx)(x,{items:o.files_data})})]}):null}},114:function(e,c,t){"use strict";t.d(c,"a",(function(){return i}));t(2);var n=t(6),s=t(5),a=t(19),r=t(0),i=function(e){return Object(r.jsx)(n.d,{to:e.to||a.b.staff_path,Icon:s.j.ArrowLeft,title:"Retourner aux documents",className:e.className})}},142:function(e,c,t){},145:function(e,c){},158:function(e,c){},159:function(e,c){},160:function(e,c){},161:function(e,c){},162:function(e,c){},164:function(e,c,t){},165:function(e,c,t){}}]);
//# sourceMappingURL=5.f4c52ed1.chunk.js.map